<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { getListings, searchListings } from '../api/listingsApi.js';
import { showLoader, hideLoader } from '../ui/loader.js';
import { showAlert } from '../ui/alerts.js';

const listingsContainer = document.querySelector('[data-listings]');
const listingTemplateCol = document.querySelector('[data-listing-template]');
const loadMoreBtn = document.querySelector('[data-listings="load-more"]');
const endOfResultsEl = document.querySelector('[data-listings-end]');
const searchForm = document.querySelector('.sb-search-form');
const searchInput = document.querySelector('#listingSearch');
const sortSelect = document.querySelector('#sortBy');
const errorEl = document.querySelector('[data-listings-error]');
const summaryEl = document.querySelector('[data-listings-summary]');

/**
 * Number of listings to show per page.
 * @type {number}
 */
const PAGE_SIZE = 12;

let currentPage = 1;
let currentSearch = '';
let currentSort = 'newest';
let isLoading = false;

// Track which listings are already rendered so we do not duplicate them
const loadedListingIds = new Set();

/**
 * Sort configuration for the API request.
 * Maps the UI sort key to API sort and sortOrder.
 * @type {Object&lt;string, {sort: string, sortOrder: string}>}
 */
const sortConfig = {
  newest: { sort: 'created', sortOrder: 'desc' },
  'ending-soon': { sort: 'endsAt', sortOrder: 'asc' },
  'highest-bid': { sort: 'created', sortOrder: 'desc' },
};

// =======================
// Helpers: errors &amp; summary
// =======================

/**
 * Show an error message above the listings, and also as a floating alert.
 *
 * @param {string} message - Error message to display.
 * @returns {void}
 */
const showError = (message) => {
  if (errorEl) {
    errorEl.textContent = message;
    errorEl.classList.remove('d-none');
  }

  showAlert('error', 'Could not load listings', message);
};

/**
 * Hide the inline error message above the listings.
 *
 * @returns {void}
 */
const clearError = () => {
  if (!errorEl) {
    return;
  }

  errorEl.textContent = '';
  errorEl.classList.add('d-none');
};

/**
 * Update the small summary text that shows how many results
 * were found for the current search term.
 *
 * @param {number} count - Number of listings currently shown.
 * @returns {void}
 */
const updateSummary = (count) => {
  if (!summaryEl) {
    return;
  }

  if (!currentSearch) {
    summaryEl.textContent = '';
    summaryEl.classList.add('d-none');
    return;
  }

  const term = currentSearch;
  let text = '';

  if (!count) {
    text = 'No listings match "' + term + '" yet.';
  } else {
    text = 'Showing ' + count + ' result(s) for "' + term + '".';
  }

  summaryEl.textContent = text;
  summaryEl.classList.remove('d-none');
};

/**
 * Show the "end of results" message under the load more button.
 *
 * @param {string} message - Message to display.
 * @returns {void}
 */
const showEndOfResults = (message) => {
  if (!endOfResultsEl) return;
  endOfResultsEl.textContent = message;
  endOfResultsEl.classList.remove('d-none');
};

/**
 * Hide the "end of results" message.
 *
 * @returns {void}
 */
const hideEndOfResults = () => {
  if (!endOfResultsEl) return;
  endOfResultsEl.textContent = '';
  endOfResultsEl.classList.add('d-none');
};

/**
 * Remove all rendered listings except the hidden template column.
 * Also clears the set of loaded listing IDs.
 *
 * @returns {void}
 */
const clearListings = () => {
  if (!listingsContainer || !listingTemplateCol) {
    return;
  }

  const cols = listingsContainer.querySelectorAll('.col');
  cols.forEach((col) => {
    if (col !== listingTemplateCol) {
      col.remove();
    }
  });

  loadedListingIds.clear();
  hideEndOfResults();
};

// =======================
// Query builders
// =======================

/**
 * Add sort query parameters based on the current sort selection.
 *
 * @param {string[]} parts - Array of query string parts to push into.
 * @returns {void}
 */
const addSortParams = (parts) => {
  const cfg = sortConfig[currentSort];
  if (!cfg) return;

  if (cfg.sort) {
    parts.push('sort=' + cfg.sort);
  }
  if (cfg.sortOrder) {
    parts.push('sortOrder=' + cfg.sortOrder);
  }
};

/**
 * Add base listing parameters that should always be sent:
 * active listings, include seller and bids, and paging info.
 *
 * @param {string[]} parts - Array of query string parts.
 * @returns {void}
 */
const addBaseListingParams = (parts) => {
  parts.push('_active=true');
  parts.push('_seller=true');
  parts.push('_bids=true');
  parts.push('limit=' + PAGE_SIZE);
  parts.push('page=' + currentPage);
  addSortParams(parts);
};

/**
 * Build the query string for the main listings endpoint.
 *
 * @returns {string} Query string starting with "?".
 */
const buildListingsQueryString = () => {
  const parts = [];
  addBaseListingParams(parts);
  return '?' + parts.join('&amp;');
};

/**
 * Build the query string for the search endpoint `/auction/listings/search`.
 *
 * @returns {string} Query string starting with "?".
 */
const buildSearchQueryString = () => {
  const parts = [];
  const trimmedSearch = currentSearch ? currentSearch.trim() : '';
  const encoded = encodeURIComponent(trimmedSearch);

  parts.push('q=' + encoded);
  addBaseListingParams(parts);

  return '?' + parts.join('&amp;');
};

/**
 * Build the query string for tag fallback search on `/auction/listings`.
 *
 * @returns {string} Query string starting with "?".
 */
const buildTagQueryString = () => {
  const parts = [];
  const trimmedSearch = currentSearch ? currentSearch.trim() : '';
  const encoded = encodeURIComponent(trimmedSearch);

  parts.push('_tag=' + encoded);
  addBaseListingParams(parts);

  return '?' + parts.join('&amp;');
};

// =======================
// Helpers: bids, time, new
// =======================

/**
 * Get the highest bid amount for a listing.
 *
 * @param {Object} listing - Listing object with a `bids` array.
 * @returns {number} Highest bid amount, or 0 if no bids.
 */
const getHighestBidAmount = (listing) => {
  const bids = listing &amp;&amp; Array.isArray(listing.bids) ? listing.bids : [];
  if (!bids.length) return 0;

  return bids.reduce((max, bid) => {
    const amount = bid &amp;&amp; typeof bid.amount === 'number' ? bid.amount : 0;
    return amount > max ? amount : max;
  }, 0);
};

/**
 * Format how much time is left until a given end date.
 *
 * Examples: "2d 4h", "3h 20m", "10m", "Ended", "Unknown".
 *
 * @param {string|null} endsAt - ISO timestamp string.
 * @returns {string} Human readable remaining time.
 */
const formatEndsIn = (endsAt) => {
  if (!endsAt) {
    return 'Unknown';
  }

  const endDate = new Date(endsAt);
  if (Number.isNaN(endDate.getTime())) {
    return 'Unknown';
  }

  const now = new Date();
  const diffMs = endDate.getTime() - now.getTime();

  if (diffMs &lt;= 0) {
    return 'Ended';
  }

  const totalSeconds = Math.floor(diffMs / 1000);
  const days = Math.floor(totalSeconds / (24 * 60 * 60));
  const hours = Math.floor((totalSeconds % (24 * 60 * 60)) / (60 * 60));
  const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);

  if (days > 0) {
    return days + 'd ' + hours + 'h';
  }

  if (hours > 0) {
    return hours + 'h ' + minutes + 'm';
  }

  return minutes + 'm';
};

/**
 * Check if a listing is considered "new".
 * A listing is "new" if it was created within the last 24 hours.
 *
 * @param {Object} listing - Listing object with a `created` timestamp.
 * @returns {boolean} True if the listing is new.
 */
const isNewListing = (listing) => {
  if (!listing || !listing.created) {
    return false;
  }

  const createdDate = new Date(listing.created);
  if (Number.isNaN(createdDate.getTime())) {
    return false;
  }

  const now = new Date();
  const diffMs = now.getTime() - createdDate.getTime();
  const diffHours = diffMs / (1000 * 60 * 60);

  return diffHours &lt;= 24;
};

/**
 * Check if a listing has already ended.
 *
 * @param {Object} listing - Listing object with an `endsAt` timestamp.
 * @returns {boolean} True if the listing has ended.
 */
const isListingEnded = (listing) => {
  if (!listing || !listing.endsAt) return false;
  const endDate = new Date(listing.endsAt);
  if (Number.isNaN(endDate.getTime())) return false;
  return endDate.getTime() &lt;= Date.now();
};

/**
 * Calculate a simple relevance score for a listing based on a search query.
 * The score is based on matches in title, tags, description, and seller name.
 *
 * @param {Object} listing - Listing to score.
 * @param {string} query - Search query string.
 * @returns {number} Relevance score (higher is better).
 */
const getRelevanceScore = (listing, query) => {
  if (!query) {
    return 0;
  }

  const q = String(query).toLowerCase();

  const title = listing &amp;&amp; listing.title ? String(listing.title).toLowerCase() : '';
  const description =
    listing &amp;&amp; listing.description ? String(listing.description).toLowerCase() : '';
  const sellerName =
    listing &amp;&amp; listing.seller &amp;&amp; listing.seller.name
      ? String(listing.seller.name).toLowerCase()
      : '';
  const tags = listing &amp;&amp; listing.tags &amp;&amp; listing.tags.length ? listing.tags : [];

  let score = 0;

  if (title === q) {
    score = score + 100;
  } else if (title.indexOf(q) !== -1) {
    score = score + 60;
  }

  for (let i = 0; i &lt; tags.length; i++) {
    const tag = tags[i];
    const tagStr = tag ? String(tag).toLowerCase() : '';
    if (!tagStr) {
      continue;
    }

    if (tagStr === q) {
      score = score + 40;
    } else if (tagStr.indexOf(q) !== -1) {
      score = score + 20;
    }
  }

  if (description &amp;&amp; description.indexOf(q) !== -1) {
    score = score + 20;
  }

  if (sellerName &amp;&amp; sellerName.indexOf(q) !== -1) {
    score = score + 10;
  }

  return score;
};

// =======================
// Sorting helpers
// =======================

/**
 * Comparator functions used for sorting listings.
 * @type {Object&lt;string, function(Object, Object): number>}
 */
const sortComparators = {
  'highest-bid': function (a, b) {
    const aMax = getHighestBidAmount(a);
    const bMax = getHighestBidAmount(b);
    return bMax - aMax;
  },
  newest: function (a, b) {
    const aTime = a &amp;&amp; a.created ? new Date(a.created).getTime() : NaN;
    const bTime = b &amp;&amp; b.created ? new Date(b.created).getTime() : NaN;

    if (Number.isNaN(aTime) || Number.isNaN(bTime) || aTime === bTime) {
      return 0;
    }

    return bTime - aTime;
  },
  'ending-soon': function (a, b) {
    const aEnd = a &amp;&amp; a.endsAt ? new Date(a.endsAt).getTime() : NaN;
    const bEnd = b &amp;&amp; b.endsAt ? new Date(b.endsAt).getTime() : NaN;

    if (Number.isNaN(aEnd) || Number.isNaN(bEnd) || aEnd === bEnd) {
      return 0;
    }

    return aEnd - bEnd;
  },
};

/**
 * Sort listings returned from a search.
 * First by relevance score, then by the chosen sort key.
 *
 * @param {Object[]} listings - Array of listing objects.
 * @param {string} query - Search term.
 * @param {string} sortKey - Key in sortComparators (e.g. "newest").
 * @returns {void}
 */
const sortSearchResults = (listings, query, sortKey) => {
  if (!listings || !listings.length || !query) {
    return;
  }

  const comparator = sortKey ? sortComparators[sortKey] : null;

  listings.sort((a, b) => {
    const scoreA = getRelevanceScore(a, query);
    const scoreB = getRelevanceScore(b, query);

    if (scoreA !== scoreB) {
      return scoreB - scoreA;
    }

    if (comparator) {
      return comparator(a, b);
    }

    return 0;
  });
};

/**
 * Sort listings when there is no search query.
 * Currently only applies extra logic for "highest-bid".
 *
 * @param {Object[]} listings - Array of listing objects.
 * @param {string} sortKey - Selected sort key.
 * @returns {void}
 */
const sortNonSearchResults = (listings, sortKey) => {
  if (!listings || !listings.length) {
    return;
  }

  if (sortKey === 'highest-bid') {
    listings.sort(sortComparators['highest-bid']);
  }
};

// =======================
// Rendering
// =======================

/**
 * Create a listing card element from the hidden template column.
 * Fills in title, seller, bids, time left, media and badges.
 *
 * @param {Object} listing - Listing data from the API.
 * @returns {HTMLElement|null} A populated card column, or null if template is missing.
 */
const createListingCard = (listing) => {
  if (!listingTemplateCol) {
    return null;
  }

  const clone = listingTemplateCol.cloneNode(true);
  clone.removeAttribute('data-listing-template');
  clone.hidden = false;

  const titleEl = clone.querySelector('[data-listing-title]');
  const sellerEl = clone.querySelector('[data-listing-seller]');
  const bidsEl = clone.querySelector('[data-listing-bids]');
  const endsEl = clone.querySelector('[data-listing-ends]');
  const linkEl = clone.querySelector('[data-listing-link]');
  const badgeEl = clone.querySelector('[data-listing-badge]');
  const highestBidEl = clone.querySelector('[data-listing-highest-bid]');
  const mediaImg = clone.querySelector('[data-listing-media]');
  const mediaFallback = clone.querySelector('[data-listing-media-fallback]');
  const mediaWrapper = clone.querySelector('.position-relative');

  const title = listing &amp;&amp; listing.title ? listing.title : 'Untitled listing';
  const sellerName =
    listing &amp;&amp; listing.seller &amp;&amp; listing.seller.name ? listing.seller.name : 'Unknown seller';

  const totalBids =
    listing &amp;&amp; listing._count &amp;&amp; typeof listing._count.bids === 'number'
      ? listing._count.bids
      : listing &amp;&amp; listing.bids &amp;&amp; listing.bids.length
        ? listing.bids.length
        : 0;

  const endsIn = formatEndsIn(listing &amp;&amp; listing.endsAt ? listing.endsAt : null);
  const highestBid = getHighestBidAmount(listing);
  const listingId = listing &amp;&amp; listing.id ? listing.id : '';
  const ended = isListingEnded(listing);

  if (titleEl) {
    titleEl.textContent = title;
  }

  if (sellerEl) {
    sellerEl.textContent = sellerName;
    sellerEl.href = 'profile.html?name=' + encodeURIComponent(sellerName);
  }

  if (bidsEl) {
    bidsEl.textContent = String(totalBids);
  }

  if (endsEl) {
    endsEl.textContent = endsIn;
  }

  if (highestBidEl) {
    highestBidEl.textContent = 'Highest bid: ' + highestBid + ' credits';
  }

  if (linkEl &amp;&amp; listingId) {
    linkEl.href = 'listing.html?id=' + encodeURIComponent(listingId);
  }

  if (badgeEl) {
    if (!ended &amp;&amp; isNewListing(listing)) {
      badgeEl.classList.remove('d-none');
    } else {
      badgeEl.classList.add('d-none');
    }
  }

  if (mediaWrapper &amp;&amp; ended) {
    const endedBadge = document.createElement('span');
    endedBadge.className = 'badge-ended position-absolute top-0 start-0 m-2';
    endedBadge.textContent = 'ENDED';
    mediaWrapper.appendChild(endedBadge);
  }

  if (mediaImg &amp;&amp; mediaFallback) {
    const media = listing &amp;&amp; Array.isArray(listing.media) ? listing.media : [];
    const first = media[0];
    const url = first &amp;&amp; first.url ? first.url : '';
    const alt = first &amp;&amp; first.alt ? first.alt : title;

    if (url) {
      mediaImg.src = url;
      mediaImg.alt = alt;
      mediaImg.classList.remove('d-none');
      mediaFallback.classList.add('d-none');
    } else {
      mediaImg.classList.add('d-none');
      mediaFallback.classList.remove('d-none');
    }
  }

  return clone;
};

/**
 * Render a list of listings into the container.
 *
 * @param {Object[]} listings - Array of listing objects.
 * @param {boolean} append - Whether to append to existing items or replace them.
 * @returns {number} Number of newly rendered listings.
 */
const renderListings = (listings, append) => {
  if (!listingsContainer || !listingTemplateCol) {
    return 0;
  }

  if (!append) {
    clearListings();
  }

  if (!listings || !listings.length) {
    updateSummary(0);
    return 0;
  }

  let newlyRenderedCount = 0;

  listings.forEach((listing) => {
    const listingId = listing &amp;&amp; listing.id ? listing.id : null;

    if (append &amp;&amp; listingId &amp;&amp; loadedListingIds.has(listingId)) {
      return;
    }

    const col = createListingCard(listing);
    if (col) {
      listingsContainer.appendChild(col);

      if (listingId) {
        loadedListingIds.add(listingId);
      }

      newlyRenderedCount += 1;
    }
  });

  updateSummary(listings.length);

  return newlyRenderedCount;
};

// =======================
// Search fetch (with tag fallback)
// =======================

/**
 * Fetch listings for a search term.
 * First uses `/auction/listings/search`, then falls back to `_tag` search
 * on `/auction/listings` if there are no results and the term is a single word.
 *
 * @returns {Promise&lt;Object[]>} Promise that resolves to an array of listings.
 */
const fetchSearchListings = async () => {
  const trimmedSearch = currentSearch ? currentSearch.trim() : '';
  const searchQs = buildSearchQueryString();

  const data = await searchListings(searchQs);
  const fromSearch = Array.isArray(data) ? data : [];

  if (fromSearch.length || trimmedSearch.indexOf(' ') !== -1) {
    return fromSearch;
  }

  const tagQs = buildTagQueryString();
  const tagData = await getListings(tagQs);
  return Array.isArray(tagData) ? tagData : [];
};

// =======================
// Loading data
// =======================

/**
 * Fetch listings for the current page, search term and sort.
 * Handles loading state, error handling and showing/hiding the load more button.
 *
 * @param {boolean} append - Whether to append results to existing ones.
 * @returns {Promise&lt;void>}
 */
const fetchListings = async (append) => {
  if (!listingsContainer || !listingTemplateCol) {
    return;
  }

  if (isLoading) {
    return;
  }

  isLoading = true;
  clearError();
  hideEndOfResults();
  showLoader();

  try {
    let data;

    if (!currentSearch) {
      const qs = buildListingsQueryString();
      data = await getListings(qs);
    } else {
      data = await fetchSearchListings();
    }

    let listings = Array.isArray(data) ? data : [];

    // Filter out ended listings from the index page
    listings = listings.filter((listing) => !isListingEnded(listing));

    if (currentSearch) {
      sortSearchResults(listings, currentSearch, currentSort);
    } else {
      sortNonSearchResults(listings, currentSort);
    }

    const newlyRenderedCount = renderListings(listings, append);

    if (!loadMoreBtn) {
      return;
    }

    if (newlyRenderedCount &lt; PAGE_SIZE) {
      loadMoreBtn.classList.add('d-none');

      if (currentPage === 1 &amp;&amp; newlyRenderedCount === 0) {
        showEndOfResults('No listings found.');
      } else {
        showEndOfResults('No more listings to show.');
      }
    } else if (!append) {
      loadMoreBtn.classList.remove('d-none');
      hideEndOfResults();
    }
  } catch (error) {
    const message =
      error &amp;&amp; error.message ? error.message : 'Could not load listings. Please try again later.';

    showError(message);
    updateSummary(0);

    if (loadMoreBtn) {
      loadMoreBtn.classList.add('d-none');
    }
    hideEndOfResults();
  } finally {
    hideLoader();
    isLoading = false;
  }
};

// =======================
// Event wiring
// =======================

if (searchForm &amp;&amp; searchInput) {
  searchForm.addEventListener('submit', async (event) => {
    event.preventDefault();

    const value = String(searchInput.value || '').trim();
    currentSearch = value;
    currentPage = 1;

    await fetchListings(false);
  });
}

if (sortSelect) {
  sortSelect.addEventListener('change', async () => {
    const value = sortSelect.value || '';
    currentSort = value;
    currentPage = 1;

    await fetchListings(false);
  });
}

if (loadMoreBtn) {
  loadMoreBtn.addEventListener('click', async () => {
    currentPage = currentPage + 1;
    await fetchListings(true);
  });
}

// =======================
// Post-login welcome toast
// =======================

/**
 * If the user just logged in (flag in sessionStorage),
 * show a one-time welcome back alert.
 */
const justLoggedInFlag = window.sessionStorage.getItem('sbAuthJustLoggedIn');
if (justLoggedInFlag === '1') {
  window.sessionStorage.removeItem('sbAuthJustLoggedIn');
  showAlert(
    'success',
    'Welcome back',
    'You are now logged in. Your credits and profile are available in the header.',
  );
}

// =======================
// Initial load
// =======================

/**
 * Immediately load the first page of listings when the script runs.
 */
(async () => {
  await fetchListings(false);
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BASE_API_URL">BASE_API_URL</a></li><li><a href="global.html#NOROFF_API_KEY">NOROFF_API_KEY</a></li><li><a href="global.html#PAGE_SIZE">PAGE_SIZE</a></li><li><a href="global.html#activateTab">activateTab</a></li><li><a href="global.html#activateTabFromHash">activateTabFromHash</a></li><li><a href="global.html#addBaseListingParams">addBaseListingParams</a></li><li><a href="global.html#addSortParams">addSortParams</a></li><li><a href="global.html#addToLocalStorage">addToLocalStorage</a></li><li><a href="global.html#avatarAltInput">avatarAltInput</a></li><li><a href="global.html#avatarDesktopWrapper">avatarDesktopWrapper</a></li><li><a href="global.html#avatarMobileWrapper">avatarMobileWrapper</a></li><li><a href="global.html#avatarUrlInput">avatarUrlInput</a></li><li><a href="global.html#bannerAltInput">bannerAltInput</a></li><li><a href="global.html#bannerEl">bannerEl</a></li><li><a href="global.html#bannerUrlInput">bannerUrlInput</a></li><li><a href="global.html#bioInput">bioInput</a></li><li><a href="global.html#buildApiUrl">buildApiUrl</a></li><li><a href="global.html#buildAvatarPayload">buildAvatarPayload</a></li><li><a href="global.html#buildListingsQueryString">buildListingsQueryString</a></li><li><a href="global.html#buildMediaArrayFromForm">buildMediaArrayFromForm</a></li><li><a href="global.html#buildSearchQueryString">buildSearchQueryString</a></li><li><a href="global.html#buildTagQueryString">buildTagQueryString</a></li><li><a href="global.html#buildTagsArray">buildTagsArray</a></li><li><a href="global.html#clearAuth">clearAuth</a></li><li><a href="global.html#clearEditMessage">clearEditMessage</a></li><li><a href="global.html#clearElement">clearElement</a></li><li><a href="global.html#clearError">clearError</a></li><li><a href="global.html#clearFieldsState">clearFieldsState</a></li><li><a href="global.html#clearInlineMessage">clearInlineMessage</a></li><li><a href="global.html#clearListings">clearListings</a></li><li><a href="global.html#createEndedBadge">createEndedBadge</a></li><li><a href="global.html#createListing">createListing</a></li><li><a href="global.html#createListingCard">createListingCard</a></li><li><a href="global.html#createMediaGroup">createMediaGroup</a></li><li><a href="global.html#createWonBadge">createWonBadge</a></li><li><a href="global.html#deleteListing">deleteListing</a></li><li><a href="global.html#disableBidForm">disableBidForm</a></li><li><a href="global.html#editCancelButton">editCancelButton</a></li><li><a href="global.html#editMessageEl">editMessageEl</a></li><li><a href="global.html#editProfileButton">editProfileButton</a></li><li><a href="global.html#editProfileForm">editProfileForm</a></li><li><a href="global.html#editProfileSection">editProfileSection</a></li><li><a href="global.html#ensureAlertContainer">ensureAlertContainer</a></li><li><a href="global.html#ensureDefaultFeedbackText">ensureDefaultFeedbackText</a></li><li><a href="global.html#errorMessageFrom">errorMessageFrom</a></li><li><a href="global.html#extractBidErrorMessage">extractBidErrorMessage</a></li><li><a href="global.html#fetchAndApplyProfile">fetchAndApplyProfile</a></li><li><a href="global.html#fetchListings">fetchListings</a></li><li><a href="global.html#fetchSearchListings">fetchSearchListings</a></li><li><a href="global.html#formatEndsIn">formatEndsIn</a></li><li><a href="global.html#formatTimeLeft">formatTimeLeft</a></li><li><a href="global.html#getAccessToken">getAccessToken</a></li><li><a href="global.html#getAuth">getAuth</a></li><li><a href="global.html#getCurrentUser">getCurrentUser</a></li><li><a href="global.html#getFromLocalStorage">getFromLocalStorage</a></li><li><a href="global.html#getHighestBidAmount">getHighestBidAmount</a></li><li><a href="global.html#getInitials">getInitials</a></li><li><a href="global.html#getListingById">getListingById</a></li><li><a href="global.html#getListingFormData">getListingFormData</a></li><li><a href="global.html#getListingIdFromQuery">getListingIdFromQuery</a></li><li><a href="global.html#getListings">getListings</a></li><li><a href="global.html#getOrCreateBidErrorElement">getOrCreateBidErrorElement</a></li><li><a href="global.html#getProfile">getProfile</a></li><li><a href="global.html#getProfileBids">getProfileBids</a></li><li><a href="global.html#getProfileNameFromQuery">getProfileNameFromQuery</a></li><li><a href="global.html#getProfileWins">getProfileWins</a></li><li><a href="global.html#getRelevanceScore">getRelevanceScore</a></li><li><a href="global.html#getSortedBids">getSortedBids</a></li><li><a href="global.html#getTrimmedField">getTrimmedField</a></li><li><a href="global.html#getTrimmedInputValue">getTrimmedInputValue</a></li><li><a href="global.html#goBackOrHome">goBackOrHome</a></li><li><a href="global.html#hasHeader">hasHeader</a></li><li><a href="global.html#headerAvatarEls">headerAvatarEls</a></li><li><a href="global.html#headerCreditsEls">headerCreditsEls</a></li><li><a href="global.html#headerLoggedIn">headerLoggedIn</a></li><li><a href="global.html#headerLoggedOut">headerLoggedOut</a></li><li><a href="global.html#hideEditSection">hideEditSection</a></li><li><a href="global.html#hideEndOfResults">hideEndOfResults</a></li><li><a href="global.html#hideLoader">hideLoader</a></li><li><a href="global.html#initHeader">initHeader</a></li><li><a href="global.html#initListingDetailsPage">initListingDetailsPage</a></li><li><a href="global.html#initListingEditPage">initListingEditPage</a></li><li><a href="global.html#initProfilePage">initProfilePage</a></li><li><a href="global.html#inlineMessageEl">inlineMessageEl</a></li><li><a href="global.html#isAuctionEnded">isAuctionEnded</a></li><li><a href="global.html#isListingEnded">isListingEnded</a></li><li><a href="global.html#isNewListing">isNewListing</a></li><li><a href="global.html#isNonEmptyString">isNonEmptyString</a></li><li><a href="global.html#justLoggedInFlag">justLoggedInFlag</a></li><li><a href="global.html#loaderEl">loaderEl</a></li><li><a href="global.html#loginUser">loginUser</a></li><li><a href="global.html#logoutUser">logoutUser</a></li><li><a href="global.html#normaliseMediaItem">normaliseMediaItem</a></li><li><a href="global.html#normalizeHeaders">normalizeHeaders</a></li><li><a href="global.html#normalizeToken">normalizeToken</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#placeBid">placeBid</a></li><li><a href="global.html#prefillFormFromListing">prefillFormFromListing</a></li><li><a href="global.html#profileBioEl">profileBioEl</a></li><li><a href="global.html#profileTitleEl">profileTitleEl</a></li><li><a href="global.html#qs">qs</a></li><li><a href="global.html#redirectToLogin">redirectToLogin</a></li><li><a href="global.html#refreshHeaderFromProfile">refreshHeaderFromProfile</a></li><li><a href="global.html#registerUser">registerUser</a></li><li><a href="global.html#removeFromLocalStorage">removeFromLocalStorage</a></li><li><a href="global.html#renderAvatarInto">renderAvatarInto</a></li><li><a href="global.html#renderBidHistory">renderBidHistory</a></li><li><a href="global.html#renderHeaderAvatarFrom">renderHeaderAvatarFrom</a></li><li><a href="global.html#renderListing">renderListing</a></li><li><a href="global.html#renderListingMedia">renderListingMedia</a></li><li><a href="global.html#renderListings">renderListings</a></li><li><a href="global.html#renderMyBids">renderMyBids</a></li><li><a href="global.html#renderMyListings">renderMyListings</a></li><li><a href="global.html#renderMyWins">renderMyWins</a></li><li><a href="global.html#renderOwnerEditButton">renderOwnerEditButton</a></li><li><a href="global.html#request">request</a></li><li><a href="global.html#safeJsonParseAuth">safeJsonParseAuth</a></li><li><a href="global.html#safeJsonParseResponse">safeJsonParseResponse</a></li><li><a href="global.html#safeJsonStringify">safeJsonStringify</a></li><li><a href="global.html#saveAuth">saveAuth</a></li><li><a href="global.html#searchListings">searchListings</a></li><li><a href="global.html#setFieldState">setFieldState</a></li><li><a href="global.html#setText">setText</a></li><li><a href="global.html#setupBidForm">setupBidForm</a></li><li><a href="global.html#setupButtonsForMode">setupButtonsForMode</a></li><li><a href="global.html#setupCancelButtons">setupCancelButtons</a></li><li><a href="global.html#setupDeleteInEditMode">setupDeleteInEditMode</a></li><li><a href="global.html#setupEditProfileForm">setupEditProfileForm</a></li><li><a href="global.html#setupFormSubmit">setupFormSubmit</a></li><li><a href="global.html#setupMediaAddButton">setupMediaAddButton</a></li><li><a href="global.html#setupMyListingCardActions">setupMyListingCardActions</a></li><li><a href="global.html#setupPreview">setupPreview</a></li><li><a href="global.html#showAlert">showAlert</a></li><li><a href="global.html#showEditMessage">showEditMessage</a></li><li><a href="global.html#showEditSection">showEditSection</a></li><li><a href="global.html#showEndOfResults">showEndOfResults</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#showInlineMessage">showInlineMessage</a></li><li><a href="global.html#showLoader">showLoader</a></li><li><a href="global.html#sortComparators">sortComparators</a></li><li><a href="global.html#sortConfig">sortConfig</a></li><li><a href="global.html#sortNonSearchResults">sortNonSearchResults</a></li><li><a href="global.html#sortSearchResults">sortSearchResults</a></li><li><a href="global.html#toDateTimeLocalValue">toDateTimeLocalValue</a></li><li><a href="global.html#toReadableDateTime">toReadableDateTime</a></li><li><a href="global.html#updateAvatar">updateAvatar</a></li><li><a href="global.html#updateHeaderCredits">updateHeaderCredits</a></li><li><a href="global.html#updateHeaderState">updateHeaderState</a></li><li><a href="global.html#updateListing">updateListing</a></li><li><a href="global.html#updateProfile">updateProfile</a></li><li><a href="global.html#updateProfileHero">updateProfileHero</a></li><li><a href="global.html#updateSummary">updateSummary</a></li><li><a href="global.html#validateListingData">validateListingData</a></li><li><a href="global.html#validateLoginFields">validateLoginFields</a></li><li><a href="global.html#validateNoroffEmail">validateNoroffEmail</a></li><li><a href="global.html#validateRegisterFields">validateRegisterFields</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Dec 10 2025 08:27:34 GMT+0100 (centraleuropeisk normaltid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
