<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: api/profilesApi.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: api/profilesApi.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { request } from './httpClient.js';

/**
 * A basic profile in the StudioBid auction system.
 *
 * @typedef {Object} Profile
 * @property {string} name - Unique profile name / handle.
 * @property {string} email - Email address for the profile.
 * @property {string} [avatar] - URL to the profile avatar image.
 * @property {number} [credits] - Available credits for bidding.
 * @property {Object} [_count] - Counts for related resources.
 * @property {number} [_count.listings] - Number of listings created by the user.
 * @property {number} [_count.wins] - Number of auctions won by the user.
 */

/**
 * Summary of a single bid made by a profile.
 *
 * @typedef {Object} ProfileBid
 * @property {string} id - Bid ID.
 * @property {number} amount - Bid amount.
 * @property {string} created - ISO timestamp when the bid was created.
 * @property {Object} listing - The listing this bid belongs to.
 * @property {string} listing.id - Listing ID.
 * @property {string} listing.title - Listing title.
 */

/**
 * Summary of a winning listing for a profile.
 *
 * @typedef {Object} ProfileWin
 * @property {string} id - Listing ID.
 * @property {string} title - Listing title.
 * @property {string} [description] - Listing description.
 * @property {string[]} [media] - Listing media URLs.
 * @property {string} endsAt - ISO timestamp when the auction ended.
 * @property {number} [finalBid] - Final winning bid amount (if returned by the API).
 */

/**
 * Build a profile URL with an optional query string.
 *
 * @param {string} name - Profile name.
 * @param {string} [queryString] - Optional query string (starting with `?`).
 * @returns {string} Relative API path for the profile.
 * @private
 */
const buildProfileUrl = (name, queryString) => {
  const encodedName = encodeURIComponent(String(name || ''));
  const qs = typeof queryString === 'string' &amp;&amp; queryString.length > 0 ? queryString : '';
  return '/auction/profiles/' + encodedName + qs;
};

/**
 * Build the URL for updating profile media (avatar).
 *
 * @param {string} name - Profile name.
 * @returns {string} Relative API path for the profile media.
 * @private
 */
const buildProfileMediaUrl = (name) => {
  const encodedName = encodeURIComponent(String(name || ''));
  return '/auction/profiles/' + encodedName + '/media';
};

/**
 * Build the URL for fetching profile bids.
 *
 * @param {string} name - Profile name.
 * @param {string} [queryString] - Optional query string.
 * @returns {string} Relative API path for the profile bids.
 * @private
 */
const buildProfileBidsUrl = (name, queryString) => {
  const encodedName = encodeURIComponent(String(name || ''));
  const qs = typeof queryString === 'string' &amp;&amp; queryString.length > 0 ? queryString : '';
  return '/auction/profiles/' + encodedName + '/bids' + qs;
};

/**
 * Build the URL for fetching profile wins.
 *
 * @param {string} name - Profile name.
 * @param {string} [queryString] - Optional query string.
 * @returns {string} Relative API path for the profile wins.
 * @private
 */
const buildProfileWinsUrl = (name, queryString) => {
  const encodedName = encodeURIComponent(String(name || ''));
  const qs = typeof queryString === 'string' &amp;&amp; queryString.length > 0 ? queryString : '';
  return '/auction/profiles/' + encodedName + '/wins' + qs;
};

/**
 * Get a profile by name.
 *
 * @param {string} name - Profile name.
 * @param {string} [queryString] - Optional query string, e.g. `"?_listings=true&amp;_wins=true"`.
 * @returns {Promise&lt;Profile>} A promise that resolves to the profile data.
 */
export const getProfile = async (name, queryString) => {
  const url = buildProfileUrl(name, queryString);
  const data = await request(url, { auth: true });
  return data;
};

/**
 * Update the avatar image for a profile.
 *
 * @param {string} name - Profile name.
 * @param {string} avatar - URL to the new avatar image.
 * @returns {Promise&lt;Profile>} A promise that resolves to the updated profile.
 */
export const updateAvatar = async (name, avatar) => {
  const url = buildProfileMediaUrl(name);
  const data = await request(url, {
    method: 'PUT',
    json: { avatar },
    auth: true,
  });
  return data;
};

/**
 * Update profile data (e.g., bio or other fields supported by the API).
 *
 * @param {string} name - Profile name.
 * @param {Object} payload - Partial profile data to update.
 * @returns {Promise&lt;Profile>} A promise that resolves to the updated profile.
 */
export const updateProfile = async (name, payload) => {
  const url = buildProfileUrl(name, '');
  const data = await request(url, {
    method: 'PUT',
    json: payload,
    auth: true,
  });
  return data;
};

/**
 * Get a list of bids placed by a profile.
 *
 * @param {string} name - Profile name.
 * @param {string} [queryString] - Optional query string, e.g. `"?_listings=true"`.
 * @returns {Promise&lt;ProfileBid[]>} A promise that resolves to an array of bids.
 */
export const getProfileBids = async (name, queryString) => {
  const url = buildProfileBidsUrl(name, queryString);
  const data = await request(url, { auth: true });
  return data;
};

/**
 * Get a list of auctions won by a profile.
 *
 * @param {string} name - Profile name.
 * @param {string} [queryString] - Optional query string for includes/filters.
 * @returns {Promise&lt;ProfileWin[]>} A promise that resolves to an array of winning listings.
 */
export const getProfileWins = async (name, queryString) => {
  const url = buildProfileWinsUrl(name, queryString);
  const data = await request(url, { auth: true });
  return data;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BASE_API_URL">BASE_API_URL</a></li><li><a href="global.html#NOROFF_API_KEY">NOROFF_API_KEY</a></li><li><a href="global.html#PAGE_SIZE">PAGE_SIZE</a></li><li><a href="global.html#activateTab">activateTab</a></li><li><a href="global.html#activateTabFromHash">activateTabFromHash</a></li><li><a href="global.html#addBaseListingParams">addBaseListingParams</a></li><li><a href="global.html#addSortParams">addSortParams</a></li><li><a href="global.html#addToLocalStorage">addToLocalStorage</a></li><li><a href="global.html#avatarAltInput">avatarAltInput</a></li><li><a href="global.html#avatarDesktopWrapper">avatarDesktopWrapper</a></li><li><a href="global.html#avatarMobileWrapper">avatarMobileWrapper</a></li><li><a href="global.html#avatarUrlInput">avatarUrlInput</a></li><li><a href="global.html#bannerAltInput">bannerAltInput</a></li><li><a href="global.html#bannerEl">bannerEl</a></li><li><a href="global.html#bannerUrlInput">bannerUrlInput</a></li><li><a href="global.html#bioInput">bioInput</a></li><li><a href="global.html#buildApiUrl">buildApiUrl</a></li><li><a href="global.html#buildAvatarPayload">buildAvatarPayload</a></li><li><a href="global.html#buildListingsQueryString">buildListingsQueryString</a></li><li><a href="global.html#buildMediaArrayFromForm">buildMediaArrayFromForm</a></li><li><a href="global.html#buildSearchQueryString">buildSearchQueryString</a></li><li><a href="global.html#buildTagQueryString">buildTagQueryString</a></li><li><a href="global.html#buildTagsArray">buildTagsArray</a></li><li><a href="global.html#clearAuth">clearAuth</a></li><li><a href="global.html#clearEditMessage">clearEditMessage</a></li><li><a href="global.html#clearElement">clearElement</a></li><li><a href="global.html#clearError">clearError</a></li><li><a href="global.html#clearFieldsState">clearFieldsState</a></li><li><a href="global.html#clearInlineMessage">clearInlineMessage</a></li><li><a href="global.html#clearListings">clearListings</a></li><li><a href="global.html#createEndedBadge">createEndedBadge</a></li><li><a href="global.html#createListing">createListing</a></li><li><a href="global.html#createListingCard">createListingCard</a></li><li><a href="global.html#createMediaGroup">createMediaGroup</a></li><li><a href="global.html#createWonBadge">createWonBadge</a></li><li><a href="global.html#deleteListing">deleteListing</a></li><li><a href="global.html#disableBidForm">disableBidForm</a></li><li><a href="global.html#editCancelButton">editCancelButton</a></li><li><a href="global.html#editMessageEl">editMessageEl</a></li><li><a href="global.html#editProfileButton">editProfileButton</a></li><li><a href="global.html#editProfileForm">editProfileForm</a></li><li><a href="global.html#editProfileSection">editProfileSection</a></li><li><a href="global.html#ensureAlertContainer">ensureAlertContainer</a></li><li><a href="global.html#ensureDefaultFeedbackText">ensureDefaultFeedbackText</a></li><li><a href="global.html#errorMessageFrom">errorMessageFrom</a></li><li><a href="global.html#extractBidErrorMessage">extractBidErrorMessage</a></li><li><a href="global.html#fetchAndApplyProfile">fetchAndApplyProfile</a></li><li><a href="global.html#fetchListings">fetchListings</a></li><li><a href="global.html#fetchSearchListings">fetchSearchListings</a></li><li><a href="global.html#formatEndsIn">formatEndsIn</a></li><li><a href="global.html#formatTimeLeft">formatTimeLeft</a></li><li><a href="global.html#getAccessToken">getAccessToken</a></li><li><a href="global.html#getAuth">getAuth</a></li><li><a href="global.html#getCurrentUser">getCurrentUser</a></li><li><a href="global.html#getFromLocalStorage">getFromLocalStorage</a></li><li><a href="global.html#getHighestBidAmount">getHighestBidAmount</a></li><li><a href="global.html#getInitials">getInitials</a></li><li><a href="global.html#getListingById">getListingById</a></li><li><a href="global.html#getListingFormData">getListingFormData</a></li><li><a href="global.html#getListingIdFromQuery">getListingIdFromQuery</a></li><li><a href="global.html#getListings">getListings</a></li><li><a href="global.html#getOrCreateBidErrorElement">getOrCreateBidErrorElement</a></li><li><a href="global.html#getProfile">getProfile</a></li><li><a href="global.html#getProfileBids">getProfileBids</a></li><li><a href="global.html#getProfileNameFromQuery">getProfileNameFromQuery</a></li><li><a href="global.html#getProfileWins">getProfileWins</a></li><li><a href="global.html#getRelevanceScore">getRelevanceScore</a></li><li><a href="global.html#getSortedBids">getSortedBids</a></li><li><a href="global.html#getTrimmedField">getTrimmedField</a></li><li><a href="global.html#getTrimmedInputValue">getTrimmedInputValue</a></li><li><a href="global.html#goBackOrHome">goBackOrHome</a></li><li><a href="global.html#hasHeader">hasHeader</a></li><li><a href="global.html#headerAvatarEls">headerAvatarEls</a></li><li><a href="global.html#headerCreditsEls">headerCreditsEls</a></li><li><a href="global.html#headerLoggedIn">headerLoggedIn</a></li><li><a href="global.html#headerLoggedOut">headerLoggedOut</a></li><li><a href="global.html#hideEditSection">hideEditSection</a></li><li><a href="global.html#hideEndOfResults">hideEndOfResults</a></li><li><a href="global.html#hideLoader">hideLoader</a></li><li><a href="global.html#initHeader">initHeader</a></li><li><a href="global.html#initListingDetailsPage">initListingDetailsPage</a></li><li><a href="global.html#initListingEditPage">initListingEditPage</a></li><li><a href="global.html#initProfilePage">initProfilePage</a></li><li><a href="global.html#inlineMessageEl">inlineMessageEl</a></li><li><a href="global.html#isAuctionEnded">isAuctionEnded</a></li><li><a href="global.html#isListingEnded">isListingEnded</a></li><li><a href="global.html#isNewListing">isNewListing</a></li><li><a href="global.html#isNonEmptyString">isNonEmptyString</a></li><li><a href="global.html#justLoggedInFlag">justLoggedInFlag</a></li><li><a href="global.html#loaderEl">loaderEl</a></li><li><a href="global.html#loginUser">loginUser</a></li><li><a href="global.html#logoutUser">logoutUser</a></li><li><a href="global.html#normaliseMediaItem">normaliseMediaItem</a></li><li><a href="global.html#normalizeHeaders">normalizeHeaders</a></li><li><a href="global.html#normalizeToken">normalizeToken</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#placeBid">placeBid</a></li><li><a href="global.html#prefillFormFromListing">prefillFormFromListing</a></li><li><a href="global.html#profileBioEl">profileBioEl</a></li><li><a href="global.html#profileTitleEl">profileTitleEl</a></li><li><a href="global.html#qs">qs</a></li><li><a href="global.html#redirectToLogin">redirectToLogin</a></li><li><a href="global.html#refreshHeaderFromProfile">refreshHeaderFromProfile</a></li><li><a href="global.html#registerUser">registerUser</a></li><li><a href="global.html#removeFromLocalStorage">removeFromLocalStorage</a></li><li><a href="global.html#renderAvatarInto">renderAvatarInto</a></li><li><a href="global.html#renderBidHistory">renderBidHistory</a></li><li><a href="global.html#renderHeaderAvatarFrom">renderHeaderAvatarFrom</a></li><li><a href="global.html#renderListing">renderListing</a></li><li><a href="global.html#renderListingMedia">renderListingMedia</a></li><li><a href="global.html#renderListings">renderListings</a></li><li><a href="global.html#renderMyBids">renderMyBids</a></li><li><a href="global.html#renderMyListings">renderMyListings</a></li><li><a href="global.html#renderMyWins">renderMyWins</a></li><li><a href="global.html#renderOwnerEditButton">renderOwnerEditButton</a></li><li><a href="global.html#request">request</a></li><li><a href="global.html#safeJsonParseAuth">safeJsonParseAuth</a></li><li><a href="global.html#safeJsonParseResponse">safeJsonParseResponse</a></li><li><a href="global.html#safeJsonStringify">safeJsonStringify</a></li><li><a href="global.html#saveAuth">saveAuth</a></li><li><a href="global.html#searchListings">searchListings</a></li><li><a href="global.html#setFieldState">setFieldState</a></li><li><a href="global.html#setText">setText</a></li><li><a href="global.html#setupBidForm">setupBidForm</a></li><li><a href="global.html#setupButtonsForMode">setupButtonsForMode</a></li><li><a href="global.html#setupCancelButtons">setupCancelButtons</a></li><li><a href="global.html#setupDeleteInEditMode">setupDeleteInEditMode</a></li><li><a href="global.html#setupEditProfileForm">setupEditProfileForm</a></li><li><a href="global.html#setupFormSubmit">setupFormSubmit</a></li><li><a href="global.html#setupMediaAddButton">setupMediaAddButton</a></li><li><a href="global.html#setupMyListingCardActions">setupMyListingCardActions</a></li><li><a href="global.html#setupPreview">setupPreview</a></li><li><a href="global.html#showAlert">showAlert</a></li><li><a href="global.html#showEditMessage">showEditMessage</a></li><li><a href="global.html#showEditSection">showEditSection</a></li><li><a href="global.html#showEndOfResults">showEndOfResults</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#showInlineMessage">showInlineMessage</a></li><li><a href="global.html#showLoader">showLoader</a></li><li><a href="global.html#sortComparators">sortComparators</a></li><li><a href="global.html#sortConfig">sortConfig</a></li><li><a href="global.html#sortNonSearchResults">sortNonSearchResults</a></li><li><a href="global.html#sortSearchResults">sortSearchResults</a></li><li><a href="global.html#toDateTimeLocalValue">toDateTimeLocalValue</a></li><li><a href="global.html#toReadableDateTime">toReadableDateTime</a></li><li><a href="global.html#updateAvatar">updateAvatar</a></li><li><a href="global.html#updateHeaderCredits">updateHeaderCredits</a></li><li><a href="global.html#updateHeaderState">updateHeaderState</a></li><li><a href="global.html#updateListing">updateListing</a></li><li><a href="global.html#updateProfile">updateProfile</a></li><li><a href="global.html#updateProfileHero">updateProfileHero</a></li><li><a href="global.html#updateSummary">updateSummary</a></li><li><a href="global.html#validateListingData">validateListingData</a></li><li><a href="global.html#validateLoginFields">validateLoginFields</a></li><li><a href="global.html#validateNoroffEmail">validateNoroffEmail</a></li><li><a href="global.html#validateRegisterFields">validateRegisterFields</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Dec 10 2025 08:27:34 GMT+0100 (centraleuropeisk normaltid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
